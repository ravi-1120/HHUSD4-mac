<template>
    <template if:true={isBothFalse} class="totalCls">
        <div class="customer-container-class" style="min-height: calc(100vh - 376px)">
            <div class="breadcrumbs">
                <span  class="breadcrumb1" onclick={redirectToHome}> Home ></span>
                <span class="breadcrumb2">My customers</span>
            </div>
            <div>
                <div class="headercls">My Customer</div>
                <div class="paginationCls">
                    <c-m-s-d_-c-o-r-e_-h-e-q_-pagination total-records={totalRecords} current-page={currentPage}
                        records-per-page-options={recordsPerPageOptions} records-per-page={recordsPerPage}
                        total-pages={totalPages} onpageoptionchange={handlePageOptionChange}
                        onpagechange={handlePageChange}>
                    </c-m-s-d_-c-o-r-e_-h-e-q_-pagination>
                </div>

                <div class="tablesCls" style="margin-bottom: 58px;">
                    <lightning-input class="searchCls" value={searchKey} variant="label-hidden"
                        onchange={handleSearchKeyChange} placeholder="Search Customers by Name or Email." type="search">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
                            <path
                                d="M21.3187 20.5273L15.232 14.4406C16.1766 13.2195 16.6875 11.7266 16.6875 10.1562C16.6875 8.27656 15.9539 6.51406 14.6273 5.18516C13.3008 3.85625 11.5336 3.125 9.65625 3.125C7.77891 3.125 6.01172 3.85859 4.68516 5.18516C3.35625 6.51172 2.625 8.27656 2.625 10.1562C2.625 12.0336 3.35859 13.8008 4.68516 15.1273C6.01172 16.4562 7.77656 17.1875 9.65625 17.1875C11.2266 17.1875 12.7172 16.6766 13.9383 15.7344L20.025 21.8187C20.0428 21.8366 20.064 21.8508 20.0874 21.8604C20.1107 21.8701 20.1357 21.8751 20.1609 21.8751C20.1862 21.8751 20.2112 21.8701 20.2345 21.8604C20.2578 21.8508 20.279 21.8366 20.2969 21.8187L21.3187 20.7992C21.3366 20.7814 21.3508 20.7602 21.3604 20.7369C21.3701 20.7135 21.3751 20.6885 21.3751 20.6633C21.3751 20.638 21.3701 20.613 21.3604 20.5897C21.3508 20.5664 21.3366 20.5452 21.3187 20.5273ZM13.3688 13.8688C12.375 14.8602 11.0578 15.4062 9.65625 15.4062C8.25469 15.4062 6.9375 14.8602 5.94375 13.8688C4.95234 12.875 4.40625 11.5578 4.40625 10.1562C4.40625 8.75469 4.95234 7.43516 5.94375 6.44375C6.9375 5.45234 8.25469 4.90625 9.65625 4.90625C11.0578 4.90625 12.3773 5.45 13.3688 6.44375C14.3602 7.4375 14.9062 8.75469 14.9062 10.1562C14.9062 11.5578 14.3602 12.8773 13.3688 13.8688Z"
                                fill="#555555" />
                        </svg>
                    </lightning-input>

                    <template if:true={noSearchResults}>
                        <div class="slds-text-color_error slds-p-around_small">
                            {searchMessage}
                        </div>
                    </template>
                    <!-- Combined Customers Table -->
                    <table class="">
                        <tbody>
                            <!-- <thead class="tableHeadCls"> -->
                            <tr class="headCls">
                                <th class="slds-text">
                                    Account name
                                </th>
                                <th class="slds-text">
                                    First name
                                </th>
                                <th class="slds-text">
                                    Last name
                                </th>
                                <th class="slds-text">
                                    Email
                                </th>
                                <th class="slds-text">
                                    Address
                                </th>
                                <th class="slds-text">
                                    Last login
                                </th>
                            </tr>
                            <!-- </thead> -->
                            <template for:each={filteredCustomers} for:item="customer">
                                <tr key={customer.Id} class="body-Class">
                                    <td class="resultsCls">
                                        {customer.AccountName}
                                    </td>
                                    <td class="resultsCls">
                                        {customer.FirstName}
                                    </td>
                                    <td class="resultsCls">
                                        {customer.LastName}
                                    </td>
                                    <td class="resultsCls">
                                        {customer.Email}
                                    </td>
                                    <td class="addressCls">
                                        <template for:each={customer.Addresses} for:item="address">
                                            <template if:true={address.Primary} key={address}>
                                                <div class="add-class" key={address}>
                                                    <div if:true={address.Name} key={address}>{address.Name},</div>
                                                    <div if:true={address.AddressLine2} key={address}>
                                                        {address.AddressLine2},</div>
                                                    <div if:true={address.AddressLine3} key={address}>
                                                        {address.AddressLine3},</div>
                                                    <div if:true={address.City} key={address}>{address.City},</div>
                                                    <div if:true={address.State} key={address}>{address.State}</div>
                                                    <div if:true={address.Zip} key={address}>{address.Zip}</div>
                                                </div>
                                            </template>
                                        </template>
                                        <div class="other-Addresses" onclick={handleOtherAddressesClick}
                                            data-id={customer.Id}>Other addresses</div>

                                        <template if:true={isModalOpen}>
                                            <section role="dialog" tabindex="-1" aria-modal="true"
                                                aria-labelledby="modal-heading-01"
                                                class="slds-modal slds-fade-in-open slds-modal_medium">
                                                <div class="slds-modal__container filter-modal">
                                                    <div class="slds-modal__content mainmodel-print">
                                                        <div>
                                                            <div class="filter-header">
                                                                <div class="filter-header-txt">Other addresses
                                                                    <br/><span>{selectedCustomer.FirstName} {selectedCustomer.LastName}</span>
                                                                </div>
                                                                <div class="close-icon">
                                                                    <lightning-icon icon-name="utility:close"
                                                                        size="small" alternative-text="close"
                                                                        class="closeiconclick" title="close"
                                                                        onclick={closeModal}>
                                                                    </lightning-icon>
                                                                </div>
                                                            </div>
                                                            <div class="print-bd">
                                                                <template for:each={selectedCustomer.Addresses}
                                                                    for:item="address">
                                                                    <template if:true={address.Primary} key={address}>
                                                                        <div key={address.Id}>
                                                                            <div class="address-section" key={address}>
                                                                                <p if:true={address.Name} key={address}>
                                                                                    {address.Name},&nbsp;</p>
                                                                                <p if:true={address.AddressLine2}
                                                                                    key={address}>
                                                                                    {address.AddressLine2},&nbsp;</p>
                                                                                <p if:true={address.AddressLine3}
                                                                                    key={address}>
                                                                                    {address.AddressLine3},&nbsp;</p>
                                                                                <p key={address}>
                                                                                    <span if:true={address.City}>{address.City},&nbsp;</span>
                                                                                    <span if:true={address.City}>{address.State},&nbsp;</span>
                                                                                    <span if:true={address.City}>{address.Zip}</span>
                                                                                </p>
                                                                            </div>
                                                                            <div class="primDefaultCls"> Default address
                                                                            </div>
                                                                        </div>
                                                                    </template>
                                                                </template>

                                                                <!-- Other Non-primary Addresses Section -->
                                                                <template for:each={nonPrimaryAddresses}
                                                                    for:item="address">
                                                                    <div key={address.Id}>
                                                                        <div class="address-section-additional">
                                                                            <p if:true={address.Name} key={address}>
                                                                                {address.Name},&nbsp;</p>
                                                                            <p if:true={address.AddressLine2}
                                                                                key={address}>
                                                                                {address.AddressLine2},&nbsp;</p>
                                                                            <p if:true={address.AddressLine3}
                                                                                key={address}>
                                                                                {address.AddressLine3},&nbsp;</p>
                                                                            <p key={address}>
                                                                                <span if:true={address.City}>{address.City},&nbsp;</span>
                                                                                <span if:true={address.City}>{address.State},&nbsp;</span>
                                                                                <span if:true={address.City}>{address.Zip}</span>
                                                                            </p>

                                                                        </div>
                                                                        <div class="defaultCls">Set as default address

                                                                            <div class="iconsCls">
                                                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                                                    width="24" height="24"
                                                                                    viewBox="0 0 24 24" fill="none">
                                                                                    <path
                                                                                        d="M6.03984 17.625C6.08672 17.625 6.13359 17.6203 6.18047 17.6133L10.1227 16.9219C10.1695 16.9125 10.2141 16.8914 10.2469 16.8563L20.182 6.92109C20.2038 6.89941 20.221 6.87366 20.2328 6.8453C20.2445 6.81695 20.2506 6.78656 20.2506 6.75586C20.2506 6.72516 20.2445 6.69477 20.2328 6.66642C20.221 6.63806 20.2038 6.61231 20.182 6.59063L16.2867 2.69297C16.2422 2.64844 16.1836 2.625 16.1203 2.625C16.057 2.625 15.9984 2.64844 15.9539 2.69297L6.01875 12.6281C5.98359 12.6633 5.9625 12.7055 5.95312 12.7523L5.26172 16.6945C5.23892 16.8201 5.24707 16.9493 5.28545 17.071C5.32384 17.1927 5.39132 17.3032 5.48203 17.393C5.63672 17.543 5.83125 17.625 6.03984 17.625ZM7.61953 13.5375L16.1203 5.03906L17.8383 6.75703L9.3375 15.2555L7.25391 15.6234L7.61953 13.5375ZM20.625 19.5938H3.375C2.96016 19.5938 2.625 19.9289 2.625 20.3438V21.1875C2.625 21.2906 2.70937 21.375 2.8125 21.375H21.1875C21.2906 21.375 21.375 21.2906 21.375 21.1875V20.3438C21.375 19.9289 21.0398 19.5938 20.625 19.5938Z"
                                                                                        fill="#757575" />
                                                                                </svg>

                                                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                                                    width="24" height="24"
                                                                                    viewBox="0 0 24 24" fill="none">
                                                                                    <path
                                                                                        d="M8.4375 4.3125H8.25C8.35313 4.3125 8.4375 4.22812 8.4375 4.125V4.3125H15.5625V4.125C15.5625 4.22812 15.6469 4.3125 15.75 4.3125H15.5625V6H17.25V4.125C17.25 3.29766 16.5773 2.625 15.75 2.625H8.25C7.42266 2.625 6.75 3.29766 6.75 4.125V6H8.4375V4.3125ZM20.25 6H3.75C3.33516 6 3 6.33516 3 6.75V7.5C3 7.60313 3.08437 7.6875 3.1875 7.6875H4.60312L5.18203 19.9453C5.21953 20.7445 5.88047 21.375 6.67969 21.375H17.3203C18.1219 21.375 18.7805 20.7469 18.818 19.9453L19.3969 7.6875H20.8125C20.9156 7.6875 21 7.60313 21 7.5V6.75C21 6.33516 20.6648 6 20.25 6ZM17.1398 19.6875H6.86016L6.29297 7.6875H17.707L17.1398 19.6875Z"
                                                                                        fill="#757575" />
                                                                                </svg>
                                                                            </div>
                                                                        </div>

                                                                    </div>

                                                                </template>
                                                            </div>
                                                        </div>
                                                        <div class="popup-actions">
                                                            <div class="dr-form_btnGroup slds-float_right">
                                                                <lightning-button role="button" class="lt-button cancel"
                                                                    variant="base" label="Cancel" title="Cancel"
                                                                    onclick={closeModal}>
                                                                </lightning-button>
                                                                <lightning-button role="button" class="lt-button"
                                                                    variant="base" label="Save" title="Save"
                                                                    onclick={handleSave}>
                                                                </lightning-button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </section>
                                            <div class="slds-backdrop slds-backdrop_open"></div>
                                        </template>
                                    </td>
                                    <td>
                                        <lightning-formatted-date-time value={customer.LastLoginDate} class="resultsCls"
                                            year="numeric" month="numeric" day="numeric" hour="2-digit" minute="2-digit"
                                            hour12="true">
                                        </lightning-formatted-date-time>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>


                <!-- Mobile Component -->
                <div class="tablesCls-mobile" style="margin-bottom: 58px;">
                    <lightning-input class="searchCls" value={searchKey} variant="label-hidden"
                        onchange={handleSearchKeyChange} placeholder="Search Customers by Name or Email." type="search">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
                            <path
                                d="M21.3187 20.5273L15.232 14.4406C16.1766 13.2195 16.6875 11.7266 16.6875 10.1562C16.6875 8.27656 15.9539 6.51406 14.6273 5.18516C13.3008 3.85625 11.5336 3.125 9.65625 3.125C7.77891 3.125 6.01172 3.85859 4.68516 5.18516C3.35625 6.51172 2.625 8.27656 2.625 10.1562C2.625 12.0336 3.35859 13.8008 4.68516 15.1273C6.01172 16.4562 7.77656 17.1875 9.65625 17.1875C11.2266 17.1875 12.7172 16.6766 13.9383 15.7344L20.025 21.8187C20.0428 21.8366 20.064 21.8508 20.0874 21.8604C20.1107 21.8701 20.1357 21.8751 20.1609 21.8751C20.1862 21.8751 20.2112 21.8701 20.2345 21.8604C20.2578 21.8508 20.279 21.8366 20.2969 21.8187L21.3187 20.7992C21.3366 20.7814 21.3508 20.7602 21.3604 20.7369C21.3701 20.7135 21.3751 20.6885 21.3751 20.6633C21.3751 20.638 21.3701 20.613 21.3604 20.5897C21.3508 20.5664 21.3366 20.5452 21.3187 20.5273ZM13.3688 13.8688C12.375 14.8602 11.0578 15.4062 9.65625 15.4062C8.25469 15.4062 6.9375 14.8602 5.94375 13.8688C4.95234 12.875 4.40625 11.5578 4.40625 10.1562C4.40625 8.75469 4.95234 7.43516 5.94375 6.44375C6.9375 5.45234 8.25469 4.90625 9.65625 4.90625C11.0578 4.90625 12.3773 5.45 13.3688 6.44375C14.3602 7.4375 14.9062 8.75469 14.9062 10.1562C14.9062 11.5578 14.3602 12.8773 13.3688 13.8688Z"
                                fill="#555555" />
                        </svg>
                    </lightning-input>
                    <!-- Combined Customers Table -->
                    <table class="">
                        <tbody>
                            <!-- <thead class="tableHeadCls"> -->
                            <tr class="headCls">
                                <th class="slds-text">
                                    First Name
                                </th>
                                <th class="slds-text">
                                    Last Name
                                </th>
                                <th class="slds-text">
                                    Email
                                </th>
                                <th class="slds-text">
                                    Address
                                </th>
                                <th class="slds-text">
                                    Last Login
                                </th>
                            </tr>
                            <!-- </thead> -->
                            <template for:each={filteredCustomers} for:item="customer">
                                <tr key={customer.Id} class="body-Class">
                                    <td class="nameCls">
                                        {customer.FirstName} {customer.LastName}
                                    </td>
                                    <!-- <td class="resultsCls">
                                        {customer.LastName}
                                    </td> -->
                                    <td class="resultsCls">
                                        {customer.Email}
                                    </td>
                                    <td class="addressCls">
                                        <template for:each={customer.Addresses} for:item="address">
                                            <template if:true={address.Primary} key={address}>
                                                <div class="add-class" key={address}>
                                                    <div if:true={address.Name} key={address}>{address.Name},</div>
                                                    <div if:true={address.AddressLine2} key={address}>
                                                        {address.AddressLine2},</div>
                                                    <div if:true={address.AddressLine3} key={address}>
                                                        {address.AddressLine3},</div>
                                                    <div if:true={address.City} key={address}>{address.City},</div>
                                                    <div if:true={address.State} key={address}>{address.State}</div>
                                                    <div if:true={address.Zip} key={address}>{address.Zip}</div>
                                                </div>
                                            </template>
                                        </template>
                                        <div class="other-Addresses" onclick={handleOtherAddressesClick}
                                            data-id={customer.Id}>Other
                                            addresses</div>

                                        <template if:true={isModalOpen}>
                                            <section role="dialog" tabindex="-1" aria-modal="true"
                                                aria-labelledby="modal-heading-01"
                                                class="slds-modal slds-fade-in-open slds-modal_medium">
                                                <div class="slds-modal__container filter-modal">
                                                    <div class="slds-modal__content mainmodel-print">
                                                        <div class="header-wrapper">
                                                            <div class="filter-header">
                                                                <div class="filter-header-txt">Other addresses
                                                                    <br/><span>{selectedCustomer.FirstName} {selectedCustomer.LastName}</span>
                                                                </div>
                                                                <div class="close-icon">
                                                                    <lightning-icon icon-name="utility:close"
                                                                        size="small" alternative-text="close"
                                                                        class="closeiconclick" title="close"
                                                                        onclick={closeModal}>
                                                                    </lightning-icon>
                                                                </div>
                                                            </div>
                                                            <div class="print-bd">
                                                                <template for:each={selectedCustomer.Addresses}
                                                                    for:item="address">
                                                                    <template if:true={address.Primary} key={address}>
                                                                        <div key={address.Id}>
                                                                            <div class="address-section" key={address}>
                                                                                <p if:true={address.Name} key={address}>
                                                                                    {address.Name},&nbsp;</p>
                                                                                <p if:true={address.AddressLine2}
                                                                                    key={address}>
                                                                                    {address.AddressLine2},&nbsp;</p>
                                                                                <p if:true={address.AddressLine3}
                                                                                    key={address}>
                                                                                    {address.AddressLine3},&nbsp;</p>
                                                                                <p key={address}>
                                                                                    <span if:true={address.City}>{address.City},&nbsp;</span>
                                                                                    <span if:true={address.City}>{address.State},&nbsp;</span>
                                                                                    <span if:true={address.City}>{address.Zip}</span>
                                                                                </p>
                                                                            </div>
                                                                            <div class="primDefaultCls"> Default address
                                                                            </div>
                                                                        </div>
                                                                    </template>
                                                                </template>

                                                                <!-- Other Non-primary Addresses Section -->
                                                                <template for:each={nonPrimaryAddresses}
                                                                    for:item="address">
                                                                    <div key={address.Id}>
                                                                        <div class="address-section-additional">
                                                                            <p if:true={address.Name} key={address}>
                                                                                {address.Name},&nbsp;</p>
                                                                            <p if:true={address.AddressLine2}
                                                                                key={address}>
                                                                                {address.AddressLine2},&nbsp;</p>
                                                                            <p if:true={address.AddressLine3}
                                                                                key={address}>
                                                                                {address.AddressLine3},&nbsp;</p>
                                                                            <p key={address}>
                                                                                <span if:true={address.City}>{address.City},&nbsp;</span>
                                                                                <span if:true={address.City}>{address.State},&nbsp;</span>
                                                                                <span if:true={address.City}>{address.Zip}</span>
                                                                            </p>

                                                                        </div>
                                                                        <div class="defaultCls">Set as default address

                                                                            <div class="iconsCls">
                                                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                                                    width="24" height="24"
                                                                                    viewBox="0 0 24 24" fill="none">
                                                                                    <path
                                                                                        d="M6.03984 17.625C6.08672 17.625 6.13359 17.6203 6.18047 17.6133L10.1227 16.9219C10.1695 16.9125 10.2141 16.8914 10.2469 16.8563L20.182 6.92109C20.2038 6.89941 20.221 6.87366 20.2328 6.8453C20.2445 6.81695 20.2506 6.78656 20.2506 6.75586C20.2506 6.72516 20.2445 6.69477 20.2328 6.66642C20.221 6.63806 20.2038 6.61231 20.182 6.59063L16.2867 2.69297C16.2422 2.64844 16.1836 2.625 16.1203 2.625C16.057 2.625 15.9984 2.64844 15.9539 2.69297L6.01875 12.6281C5.98359 12.6633 5.9625 12.7055 5.95312 12.7523L5.26172 16.6945C5.23892 16.8201 5.24707 16.9493 5.28545 17.071C5.32384 17.1927 5.39132 17.3032 5.48203 17.393C5.63672 17.543 5.83125 17.625 6.03984 17.625ZM7.61953 13.5375L16.1203 5.03906L17.8383 6.75703L9.3375 15.2555L7.25391 15.6234L7.61953 13.5375ZM20.625 19.5938H3.375C2.96016 19.5938 2.625 19.9289 2.625 20.3438V21.1875C2.625 21.2906 2.70937 21.375 2.8125 21.375H21.1875C21.2906 21.375 21.375 21.2906 21.375 21.1875V20.3438C21.375 19.9289 21.0398 19.5938 20.625 19.5938Z"
                                                                                        fill="#757575" />
                                                                                </svg>

                                                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                                                    width="24" height="24"
                                                                                    viewBox="0 0 24 24" fill="none">
                                                                                    <path
                                                                                        d="M8.4375 4.3125H8.25C8.35313 4.3125 8.4375 4.22812 8.4375 4.125V4.3125H15.5625V4.125C15.5625 4.22812 15.6469 4.3125 15.75 4.3125H15.5625V6H17.25V4.125C17.25 3.29766 16.5773 2.625 15.75 2.625H8.25C7.42266 2.625 6.75 3.29766 6.75 4.125V6H8.4375V4.3125ZM20.25 6H3.75C3.33516 6 3 6.33516 3 6.75V7.5C3 7.60313 3.08437 7.6875 3.1875 7.6875H4.60312L5.18203 19.9453C5.21953 20.7445 5.88047 21.375 6.67969 21.375H17.3203C18.1219 21.375 18.7805 20.7469 18.818 19.9453L19.3969 7.6875H20.8125C20.9156 7.6875 21 7.60313 21 7.5V6.75C21 6.33516 20.6648 6 20.25 6ZM17.1398 19.6875H6.86016L6.29297 7.6875H17.707L17.1398 19.6875Z"
                                                                                        fill="#757575" />
                                                                                </svg>
                                                                            </div>
                                                                        </div>

                                                                    </div>

                                                                </template>
                                                            </div>
                                                        </div>
                                                        <div class="popup-actions">
                                                            <div class="dr-form_btnGroup slds-float_right">
                                                                <lightning-button role="button" class="lt-button cancel"
                                                                    variant="base" label="Cancel" title="Cancel"
                                                                    onclick={closeModal}>
                                                                </lightning-button>
                                                                <lightning-button role="button" class="lt-button"
                                                                    variant="base" label="Save" title="Save"
                                                                    onclick={handleSave}>
                                                                </lightning-button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </section>
                                            <div class="slds-backdrop slds-backdrop_open"></div>
                                        </template>
                                    </td>
                                    <td>
                                        <lightning-formatted-date-time label={lastlogin} value={customer.LastLoginDate}
                                            class="resultsCls" year="numeric" month="numeric" day="numeric"
                                            hour="2-digit" minute="2-digit" hour12="true">
                                        </lightning-formatted-date-time>
                                    </td>

                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </template>
    <div if:true={filterLayout}>

        <div>
            <div class="filter-header">
                <div class="filter-header-txt">
                    <span>Select customer</span>
                    <div class="close-icon mobileicon">
                        <lightning-icon icon-name="utility:close" size="small" alternative-text="close"
                            class="closeiconclick" title="close" onclick={closeCustomerModel}>
                        </lightning-icon>
                    </div>
                </div>
                <div class="search-box">
                    <div class="search-container">
                        <input type="search" value={searchKey} onkeyup={handlesearch} variant="label-hidden" placeholder="Search" class="custom-search-input"/>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
                            <path
                                d="M21.3187 20.5273L15.232 14.4406C16.1766 13.2195 16.6875 11.7266 16.6875 10.1562C16.6875 8.27656 15.9539 6.51406 14.6273 5.18516C13.3008 3.85625 11.5336 3.125 9.65625 3.125C7.77891 3.125 6.01172 3.85859 4.68516 5.18516C3.35625 6.51172 2.625 8.27656 2.625 10.1562C2.625 12.0336 3.35859 13.8008 4.68516 15.1273C6.01172 16.4562 7.77656 17.1875 9.65625 17.1875C11.2266 17.1875 12.7172 16.6766 13.9383 15.7344L20.025 21.8187C20.0428 21.8366 20.064 21.8508 20.0874 21.8604C20.1107 21.8701 20.1357 21.8751 20.1609 21.8751C20.1862 21.8751 20.2112 21.8701 20.2345 21.8604C20.2578 21.8508 20.279 21.8366 20.2969 21.8187L21.3187 20.7992C21.3366 20.7814 21.3508 20.7602 21.3604 20.7369C21.3701 20.7135 21.3751 20.6885 21.3751 20.6633C21.3751 20.638 21.3701 20.613 21.3604 20.5897C21.3508 20.5664 21.3366 20.5452 21.3187 20.5273ZM13.3688 13.8688C12.375 14.8602 11.0578 15.4062 9.65625 15.4062C8.25469 15.4062 6.9375 14.8602 5.94375 13.8688C4.95234 12.875 4.40625 11.5578 4.40625 10.1562C4.40625 8.75469 4.95234 7.43516 5.94375 6.44375C6.9375 5.45234 8.25469 4.90625 9.65625 4.90625C11.0578 4.90625 12.3773 5.45 13.3688 6.44375C14.3602 7.4375 14.9062 8.75469 14.9062 10.1562C14.9062 11.5578 14.3602 12.8773 13.3688 13.8688Z"
                                fill="#555555" />
                        </svg>
                    </div>
                    <div class="close-icon desktopicon">
                        <lightning-icon icon-name="utility:close" size="small" alternative-text="close"
                            class="closeiconclick" title="close" onclick={closeCustomerModel}>
                        </lightning-icon>
                    </div>
                </div>
            </div>
        </div>

        <div class="filter-container" if:false={noRegisteredRecords}>
            <div class="grid-container mb-display">
                <div class="grid-header checkbox"></div>
                <div class="grid-header">Account name</div>
                <div class="grid-header">First name</div>
                <div class="grid-header">Last name</div>
                <div class="grid-header">Address</div>

                <template for:each={registeredCustomers} for:item="mycustomer">
                    <div key={mycustomer.Id} class="grid-item checkbox">
                        <lightning-input type="checkbox" value={mycustomer.Id} data-firstname={mycustomer.FirstName}
                            data-lastname={mycustomer.LastName} data-email={mycustomer.Email} onchange={handleCheckbox}>
                        </lightning-input>
                    </div>
                    <div key={mycustomer.Id} class="grid-item"> {mycustomer.AccountName} </div>
                    <div key={mycustomer.Id} class="grid-item"> {mycustomer.FirstName} </div>
                    <div key={mycustomer.Id} class="grid-item">{mycustomer.LastName}</div>
                    <div key={mycustomer.Id} class="grid-item">
                        {mycustomer.displayAddress}
                    </div>
                </template>
            </div>

            <div class="grid-container mbl-display">
                <div class="self-print checkbox m-hi">
                    <lightning-input class="quantity-input" type="checkbox" variant="label-hidden"
                        onchange={handleSelfPrint}>
                    </lightning-input> Print to self
                </div>
                <template for:each={registeredCustomers} for:item="mycustomer">
                    <div key={mycustomer.Id} class="mbl-filter-container">
                        <div class="checkbox">
                            <lightning-input type="checkbox" value={mycustomer.Id} data-firstname={mycustomer.FirstName}
                                data-lastname={mycustomer.LastName} data-email={mycustomer.Email}
                                onchange={handleCheckbox}>
                            </lightning-input>
                        </div>
                        <div>
                            <div>{mycustomer.AccountName}</div>
                            <div>{mycustomer.FirstName} {mycustomer.LastName}</div>
                            <div>{mycustomer.displayAddress}</div>
                        </div>
                    </div>
                </template>
            </div>
        </div>
        <div class="filter-norecords" if:true={noRegisteredRecords}>
            No customers found for your search.
        </div>
        <div class="filter-btn-layout print">
            <div class="self-print checkbox w-dp">
                <lightning-input class="quantity-input" type="checkbox" variant="label-hidden"
                    onchange={handleSelfPrint}></lightning-input> Print to self
            </div>
            <div if:true={isFooterbutton} class="dr-form_btnGroup slds-float_right slds-var-p-top_large">
                <lightning-button role="button" class="lt-button cancel" variant="base" label="Cancel" title="Cancel"
                    onclick={showCancelModal}>
                </lightning-button>
                <lightning-button role="button" class="lt-button" variant="base" label={footerbtnname}
                    title={footerbtnname} onclick={handleShareClick}>
                </lightning-button>
            </div>
        </div>
    </div>
    <div if:true={unfilterLayout}>

        <div>
            <div class="filter-header">
                <div class="filter-header-txt">
                    <span>Select customer</span>
                    <div class="close-icon mobileicon">
                        <lightning-icon icon-name="utility:close" size="small" alternative-text="close"
                            class="closeiconclick" title="close" onclick={closeCustomerModel}>
                        </lightning-icon>
                    </div>
                </div>
                <div class="search-box">
                    <div class="search-container">
                        <input type="search" value={searchKey} onkeyup={handlesearch} variant="label-hidden" placeholder="Search" class="custom-search-input"/>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
                            <path
                                d="M21.3187 20.5273L15.232 14.4406C16.1766 13.2195 16.6875 11.7266 16.6875 10.1562C16.6875 8.27656 15.9539 6.51406 14.6273 5.18516C13.3008 3.85625 11.5336 3.125 9.65625 3.125C7.77891 3.125 6.01172 3.85859 4.68516 5.18516C3.35625 6.51172 2.625 8.27656 2.625 10.1562C2.625 12.0336 3.35859 13.8008 4.68516 15.1273C6.01172 16.4562 7.77656 17.1875 9.65625 17.1875C11.2266 17.1875 12.7172 16.6766 13.9383 15.7344L20.025 21.8187C20.0428 21.8366 20.064 21.8508 20.0874 21.8604C20.1107 21.8701 20.1357 21.8751 20.1609 21.8751C20.1862 21.8751 20.2112 21.8701 20.2345 21.8604C20.2578 21.8508 20.279 21.8366 20.2969 21.8187L21.3187 20.7992C21.3366 20.7814 21.3508 20.7602 21.3604 20.7369C21.3701 20.7135 21.3751 20.6885 21.3751 20.6633C21.3751 20.638 21.3701 20.613 21.3604 20.5897C21.3508 20.5664 21.3366 20.5452 21.3187 20.5273ZM13.3688 13.8688C12.375 14.8602 11.0578 15.4062 9.65625 15.4062C8.25469 15.4062 6.9375 14.8602 5.94375 13.8688C4.95234 12.875 4.40625 11.5578 4.40625 10.1562C4.40625 8.75469 4.95234 7.43516 5.94375 6.44375C6.9375 5.45234 8.25469 4.90625 9.65625 4.90625C11.0578 4.90625 12.3773 5.45 13.3688 6.44375C14.3602 7.4375 14.9062 8.75469 14.9062 10.1562C14.9062 11.5578 14.3602 12.8773 13.3688 13.8688Z"
                                fill="#555555" />
                        </svg>
                    </div>
                    <div class="close-icon desktopicon">
                        <lightning-icon icon-name="utility:close" size="small" alternative-text="close"
                            class="closeiconclick" title="close" onclick={closeCustomerModel}>
                        </lightning-icon>
                    </div>
                </div>
            </div>
        </div>

        <div data-scroll-area class="filter-container" if:false={isCustomerEmpty}>
            <div class="grid-container mb-display mycollectioncustomer">

                <div class="grid-header checkbox"></div>
                <div class="grid-header">Account name</div>
                <div class="grid-header">First name</div>
                <div class="grid-header">Last name</div>
                <div class="grid-header">Email</div>


                <template for:each={newRecipients} for:item="newRecipient">
                    <div key={newRecipient.Id} class="grid-item checkbox">
                        <input type="checkbox" class="checkbox-a" name="selectRecipient" data-id={newRecipient.Id}
                                value={newRecipient.Id} data-firstname={newRecipient.FirstName}
                                data-lastname={newRecipient.LastName} data-email={newRecipient.Email}
                                onchange={handleCheck}>
                    </div>
                    <div key={newRecipient.Id} class="grid-item"></div>

                    <div key={newRecipient.Id} class="grid-item-a">
                        <input type="text" class="inputcls target-section" lwc:dom="manual" name="FirstName" data-id={newRecipient.Id} value={newRecipient.FirstName}
                placeholder="First Name" required oninput={handleRecipient}/>
                        <template if:true={newRecipient.firstNameError}>
                            <div class="error-message">First Name is required.</div>
                        </template>
                    </div>

                    <div key={newRecipient.Id} class="grid-item-a">
                        <input type="text" class="inputcls" name="LastName" data-id={newRecipient.Id} value={newRecipient.LastName}
                placeholder="Last Name" required oninput={handleRecipient} />
                        <template if:true={newRecipient.lastNameError}>
                            <div class="error-message">Last Name is required.</div>
                        </template>
                    </div>
                    <div key={newRecipient.Id} class="grid-item-a" style="display: flex; flex-direction: row; align-items: center;">
                        <div style="display: flex; flex-direction: column">
                            <input type="email" class="inputemailcls" name="Email" data-id={newRecipient.Id} value={newRecipient.Email}
                placeholder="Email" oninput={handleRecipient} />
                            <template if:true={newRecipient.emailError}>
                                <div class="error-message">Invalid email format.</div>
                            </template>
                        </div>
                        <div key={newRecipient.Id} class="grid-item" style="display: flex;">
                            <a data-id={newRecipient.Id} class="remove-recipient" onclick={removeRecipient}>
                                Remove
                            </a>
                        </div>
                    </div>
                </template>

                <template for:each={allCustomers} for:item="mycustomer">
                    <div key={mycustomer.Id} class="grid-item checkbox">
                        <lightning-input type="checkbox" value={mycustomer.Id} data-firstname={mycustomer.FirstName}
                            data-lastname={mycustomer.LastName} data-email={mycustomer.Email}
                            data-isregister={mycustomer.IsRegister} onchange={handleCheckbox}>
                        </lightning-input>
                    </div>
                    <div key={mycustomer.Id} class="grid-item">{mycustomer.AccountName}</div>
                    <div key={mycustomer.Id} class="grid-item"> {mycustomer.FirstName} </div>
                    <div key={mycustomer.Id} class="grid-item">{mycustomer.LastName}</div>
                    <div key={mycustomer.Id} class="grid-item" style="display: block;">
                        {mycustomer.Email}
                        <br/>
                        <span if:true={mycustomer.LastLoginDate} style="font-weight: 700;padding-right: 4px;">Last login</span>{mycustomer.LastLoginDate}
                    </div>

                </template>

            </div>

            <div class="grid-container mbl-display">
                <template for:each={allCustomers} for:item="mycustomer">
                    <div key={mycustomer.Id} class="mbl-filter-container">
                        <div class="checkbox">
                            <lightning-input type="checkbox" value={mycustomer.Id}
                                data-accountname={mycustomer.AccountName} data-firstname={mycustomer.FirstName}
                                data-lastname={mycustomer.LastName} data-email={mycustomer.Email}
                                onchange={handleCheckbox}>
                            </lightning-input>
                        </div>
                        <div>
                            <div>{mycustomer.AccountName}</div>
                            <div> {mycustomer.FirstName} {mycustomer.LastName}</div>
                            <div>{mycustomer.Email}</div>
                            <span if:true={mycustomer.LastLoginDate} style="font-weight: 700;color:#202020">Last login:</span>{mycustomer.LastLoginDate}
                        </div>
                    </div>
                </template>
                <div class="mbl-new-recipients-display">
                    <template for:each={newRecipients} for:item="newRecipient">
                        <div key={newRecipient.Id} class="mbl-recipients-container">
                            <div class="checkboxmbl">
                                <lightning-input type="checkbox" value={newRecipient.Id}
                                    data-name={newRecipient.FirstName} data-email={newRecipient.Email}
                                    onchange={handleCheck}>
                                </lightning-input>
                                <div class="mblnew">
                                    <div key={newRecipient.Id}>
                                        <input type="text" class="inputclsmbl " lwc:dom="manual" name="FirstName" data-id={newRecipient.Id} value={newRecipient.FirstName}
                placeholder="First Name" required oninput={handleRecipient}/>
                                        <template if:true={newRecipient.firstNameError}>
                                            <div class="error-message">First Name is required.</div>
                                        </template>
                                    </div>
                                    <div key={newRecipient.Id}>
                                        <input type="text" class="inputclsmbl"  name="LastName" data-id={newRecipient.Id} value={newRecipient.LastName}
                placeholder="Last Name" required oninput={handleRecipient}/>
                                        <template if:true={newRecipient.lastNameError}>
                                            <div class="error-message">Last Name is required.</div>
                                        </template>
                                    </div>
                                    <div key={newRecipient.Id}>
                                        <input type="email" class="inputclsmbl" name="Email" data-id={newRecipient.Id} value={newRecipient.Email}
                placeholder="Email" oninput={handleRecipient} />
                                        <template if:true={newRecipient.emailError}>
                                            <div class="error-message">Invalid email format.</div>
                                        </template>
                                    </div>
                                    <div key={newRecipient.Id} class="">
                                        <a data-id={newRecipient.Id} class="remove-recipient" onclick={removeRecipient}>
                                            Remove
                                        </a>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </template>
                </div>
            </div>

        </div>
        <div class="filter-norecords" if:true={isCustomerEmpty}>
            No customers found for your search.
        </div>
        <div if:true={isFooterbutton} class="footer-container">
            <div class="float-left">
                <a class="add-recipient" if:false={hideAddRecipient} onclick={addRecipient}>Add recipient</a>

                <div class=" grid-container-email emailtoself checkbox" if:false={hideAddRecipient}>
                    <lightning-input type="checkbox" class="emailtoselfcheck" onchange={emailToSelfCheckboxChange}>
                    </lightning-input>
                    <a class="emailself"> Email to self </a>
                </div>
            </div>
            <div class="dr-form_btnGroup slds-float_right">
                <lightning-button role="button" class="lt-button cancel" variant="base" label="Cancel" title="Cancel"
                    onclick={showCancelModal}>
                </lightning-button>
                <lightning-button role="button" class="lt-button" variant="base" label={footerbtnname}
                    title={footerbtnname} onclick={handleShareClick}>
                </lightning-button>
            </div>
        </div>
    </div>
    <div if:true={showSpinner}>
        <c-m-s-d_-c-o-r-e_-h-e-q_-spinner></c-m-s-d_-c-o-r-e_-h-e-q_-spinner>
    </div>
    <c-custom-toast auto-close-time="6000"></c-custom-toast>
</template>