<template>
    <div class="slds-grid slds-grid_vertical slds-p-vertical_x-small">
        <div class="slds-box_x-small slds-m-horizontal_small slds-m-vertical_xx-small slds-box slds-theme_shade">
            <p class="slds-text-heading_small slds-p-left_xx-small">{title}</p>
        </div>
        <div class="slds-p-horizontal_xx-small">
            <lightning-layout class="slds-p-vertical_small">
                <lightning-layout-item padding="horizontal-large">
                    <lightning-button label={addAttendeesButtonLabel} title={addAttendeesButtonLabel} onclick={launchAttendeeSearchModal} class="slds-m-left_x-small"></lightning-button>
                    <p class="slds-m-left_x-small slds-m-top_xx-small slds-text-color_error" if:true={showRequiredError}>{labels.addAtLeastOneAttendee}</p>
                </lightning-layout-item>
            </lightning-layout>
            <lightning-layout multiple-rows="true" class="slds-p-left_large slds-p-right_x-large slds-scrollable_y v-s4l-attenee-section-body">
                <template for:each={selectedAttendees} for:item="selectedAttendee">
                    <lightning-layout-item size="12" key={selectedAttendee.id}>
                        <lightning-layout vertical-align="center" class="slds-border_bottom">
                            <lightning-layout-item class="slds-p-left_x-small" size="11">
                                <p class="slds-text-body_regular slds-p-top_x-small">{selectedAttendee.formattedName}</p>
                                <p class="slds-text-title slds-p-bottom_x-small slds-p-top_xx-small">{selectedAttendee.supplementalInfo}</p>
                            </lightning-layout-item>
                            <lightning-layout-item size="1">
                                <lightning-button-icon icon-name="utility:delete" variant="bare"
                                    size="medium"
                                    value={selectedAttendee.id}
                                    alternative-text="Delete"
                                    icon-class="slds-m-around_medium"
                                    onclick={handleDeleteAttendee}>
                                </lightning-button-icon>
                            </lightning-layout-item>
                        </lightning-layout>
                    </lightning-layout-item>
                </template>
            </lightning-layout>
            <!-- alert window when the number of attendees added by the user exceeds the maximum limit -->
            <c-veeva-alert-modal if:true={showLimitationReachedAlert} show={showLimitationReachedAlert}
                title={labels.attendeeLimitReached} messages={attendeeMaxAlertMessage}
                okay-label={labels.close} button-style="neutral" onclose={closeLimitationReachedAlert} >
            </c-veeva-alert-modal>
        </div>
        <c-s4l-attendee-search if:true={showAttendeeSearchModal} labels={labels}
            account={selectedAccountId} call={selectedCallId} mca-id={mcaId}
            modal-title={attendeeSearchModalTitle} save-btn-label={attendeeSearchModalSaveBtnLabel}
            is-child-account-enabled={isChildAccountEnabled}
            already-selected-attendees-id={selectedAttendeeIds}
            onadd={handleAddAttendees}
            onclose={handleCloseAddAttendeeModal}
            is-sign-details-on-layout={isSignDetailsOnLayout}>
        </c-s4l-attendee-search>
    </div>
</template>