<template>
    <c-section-template ctrl={ctrl} open>
        <div slot='content'>
            <lightning-button variant="base" label={labelAddSection} if:true={displayAddSectionCopy}
                onclick={addInquiry}>
            </lightning-button>
            <template if:true={records}>
                <template iterator:it={records} if:true={ctrl.actionView}>
                    <article key={it.value.id} class="slds-card">
                        <lightning-layout vertical-align='start' class='slds-p-top_x-small slds-m-horizontal_x-small'>
                            <c-mpi-buttons-row record={it.value} page-ctrl={ctrl.pageCtrl}></c-mpi-buttons-row>
                            <lightning-layout-item flexibility="auto" class="slds-m-top_xxx-small">
                                <template iterator:row={ctrl.meta.layoutRows}>
                                    <c-veeva-row data-veeva-row-id={row.value.key} row-key={row.value.key}
                                        row={row.value} key={row.value.key} page-ctrl={ctrl.pageCtrl} record={it.value}
                                        last-row={row.last} record-update-flag={recordUpdateFlag}>
                                    </c-veeva-row>
                                </template>
                            </lightning-layout-item>
                        </lightning-layout>
                    </article>
                </template>
                <template iterator:it={records} if:false={ctrl.actionView}>
                    <c-veeva-mpi-section-record record={it.value} ctrl={ctrl}
                        data-veeva-mpi-section-record={it.value.id} record-key={it.value.id} key={it.value.id}
                        label-copy={labelCopy} label-del={labelDel} display-add-section-copy={displayAddSectionCopy}
                        display-delete-link={displayDeleteLink} oncopyinquiry={copyInquiry}
                        ondeleteinquiry={deleteInquiry}>
                    </c-veeva-mpi-section-record>
                </template>
            </template>
        </div>
    </c-section-template>
</template>