<template>
	<template if:true={errorMsg}>
		<template if:false={resendActivation}>
			<div class="success-container">
				<div class="success-screenerrorMsg">
					<img class="login-cover" alt="Cover Image" role="presentation" src={image}/>
					<div class="loginPage">
						<img class="header-logoerrorMsg" src={merckLogo} alt="Merck Logo"></img>
						<div class="login-sectionerrorMsg">

							<div class="iconCls" if:false={isNewUser}>
								<h2 class="success-header">{labels.invalidPage}</h2>
							</div>
							<template if:true={isNewUser}>
								<h2 class="success-header">{labels.ActivationMessage}</h2>
							</template>
						</div>
						<lightning-button class="success-button lt-button" variant="base" label="Resend" title="Resend"
							onclick={resendLink}>
						</lightning-button>
					</div>

				</div>
			</div>
		</template>
		<template if:true={resendActivation}>
			<div class="success-container">
				<div class="success-screenerrorMsg">
					<img class="login-cover" alt="Cover Image" role="presentation" src={image}/>
					<div class="success-screen">
						<img class="header-logoerrorMsgs" src={merckLogo} alt="Merck Logo"></img>
						<div class="login-sectionerrorMsg slds-grid slds-gutters">
							<!-- <lightning-icon size="large" icon-name="utility:success" class="upload-icon slds-col">
							</lightning-icon> -->
							<h2 class="success-header slds-col">Password reset instructions have been resent to your email.</h2>
						</div>
					</div>
				</div>
			</div>
		</template>
	</template>
	<template if:true={validToken}>
		<div class="login-container">
			<img class="login-cover" alt="Cover Image" role="presentation" src={image}/>
			<div class="login-section">
				<img class="header-logo" src={merckLogo} alt="Merck Logo" onclick={loginback}></img>
				<div class="login-screen">
					<h3 class="login-header">{labels.cnHeader}</h3>
					<div
						class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left lt-input-container">
						<lightning-icon size="x-small"
							class="iconMargin slds-icon slds-input__icon slds-input__icon_right slds-icon-text-default"
							icon-name="utility:lock"></lightning-icon>
						<lightning-input class="lt-input" type="password" variant="label-hidden" name="Password"
							value={password} onchange={handleUserInput} placeholder={labels.newPassword}>
						</lightning-input>
					</div>
					<div
						class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left lt-input-container">
						<lightning-icon size="x-small"
							class="iconMargin slds-icon slds-input__icon slds-input__icon_right slds-icon-text-default"
							icon-name="utility:lock"></lightning-icon>
						<lightning-input class="lt-input" type="password" variant="label-hidden"
							onchange={handleUserInput} name="Confirm Password" value={confirmPassword}
							placeholder={labels.confirmPassword}>
						</lightning-input>
					</div>
					<template if:true={resetError}>
						<p class="val-error" role="alert">	
							{labels.resetErrorMsg}
						</p>
					</template>
					<div class="validation-check">
						<h4 class="validation-header">{labels.pwdRequirements}</h4>
						<ul>
							<template for:each={valRules} for:item="valRule">
								<li key={valRule.label} class={valRule.className}>
									<lightning-icon size="x-small"
										class="iconMargin slds-icon slds-input__icon slds-input__icon_right slds-icon-text-default"
										icon-name="utility:check"></lightning-icon>
									<span>{valRule.message}</span>
								</li>
							</template>
						</ul>
					</div>
					<lightning-button role="button" class="lt-button" disabled={resetDisabled} variant="base"
						label={labels.resetPwd} onclick={handleChangePassword} title={labels.resetPwd}>
					</lightning-button>
				</div>
			</div>
		</div>
	</template>
	<div if:true={showSpinner}>
		<c-pds-spinner></c-pds-spinner>
	</div>
</template>