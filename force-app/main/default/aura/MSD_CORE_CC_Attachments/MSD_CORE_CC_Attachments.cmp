<aura:component extends="c:ComponentUtils" controller="MSD_CORE_CC_AttachmentsController" implements="flexipage:availableForRecordHome,force:hasRecordId" access="global" >	
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
    <aura:attribute name="accept" type="List" default="['.csv', '.jpg', '.jpeg', '.pdf', '.png', '.docx', '.pptx']"/>
    <aura:attribute name="multiple" type="Boolean" default="false"/>
    <aura:attribute name="disabled" type="Boolean" default="false"/>
    <aura:attribute name="showAsTable" type="Boolean" default="false"/>
    <aura:attribute name="attachmentSize" type="Integer" />
    <aura:attribute name="message" type="String" />
    <aura:attribute name="attList" type="Object[]"/>
    <aura:attribute name="attachments" type="MSD_CORE_CC_AttachmentsController.AttachmentWrapper"/>
    <aura:attribute name="recordId" type="String"/>
    <aura:handler name="change" value="{!v.recordId}" action="{!c.doInit}"/>
    <lightning:workspaceAPI aura:id="workspace" />
    
    <div class="flexipageComponent">
        <div class="container forceRelatedListSingleContainer">
            <article class="slds-card slds-card_boundary forceRelatedListCardDesktop" aria-describedby="header"  >
                <div class="slds-card__header slds-grid">
                    <header class="slds-media slds-media--center slds-has-flexi-truncate">
                        <div class="slds-media__figure">
                            <div class="extraSmall forceEntityIcon">
                                <span class="uiImage"  />
                                <lightning:icon iconName="standard:file" size="small" ></lightning:icon>
                            </div>
                        </div>
                        <div class="slds-media__body" >
                            <h2 id="header">
                                <a class="slds-card__header-link baseCard__header-title-container" href="javascript:void(0);" onclick="{!c.gotoRelatedList}">
                                    <span class="slds-card__header-title slds-truncate slds-m-right--xx-small" >Attachments</span>
                                    <span class="slds-text-heading--small slds-shrink-none slds-m-right--xx-small" ></span>
                                </a>
                            </h2>
                        </div>
                    </header>
                    <div class="slds-no-flex">
                        <div class="actionsContainer">
                            <ul class="small oneActionsRibbon forceActionsContainer forceDeferredDropDownAction" >
                                <li class="oneActionsDropDown" >
                                    <div class="uiMenu" >
                                        <div class="uiPopupTrigger" >
                                            <!--<lightning:buttonMenu alternativeText="More options" onselect="{!c.uploadFiles }" iconSize="x-small" menuAlignment="right">
                                                <lightning:menuItem label="Upload Files" class="menuItemLink" value="Upload Files"  />
                                            </lightning:buttonMenu>-->
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="slds-card__body" >
                    <div class="" >
                        <div class="previewMode SMALL forceRelatedListPreview" >
                            <div class="slds-grid_pull-padded slds-card__body_inner" >
                                <ul class="uiAbstractList" >
                                    <section>
                                        <iframe src="{!'/apex/MSD_CORE_CaseAttachment?id='+v.recordId}" style="width: 100%;
                                                                                                               border: none;
                                                                                                               padding: 10px;
                                                                                                               height:140px;"></iframe>
                                        
                                        <br/>
                                        
                                        <aura:if isTrue="{!v.showAsTable == false}">
                                            <aura:iteration items="{!v.attachments.attachList}" var="att"  indexVar="index" >
                                                <li class="slds-p-horizontal--small desktop forceImageRelatedListStencil forceRecordLayout" style="margin-bottom:5px;">
                                                    <div class="listItemBody withActions" >
                                                        <h3 class="primaryField" >
                                                            <div class="slds-size_12-of-12 slds-grid" data-aura-rendered-by="13350:0">
                                                                <div class="slds-align-middle">
                                                                    <span>
                                                                        <lightning:icon iconName="doctype:attachment" size="small" alternativeText="Attachments" />
                                                                    </span>
                                                                </div>
                                                                <div class="slds-show_inline-block slds-float_left slds-p-left--x-small slds-truncate slds-m-right_x-small" data-aura-rendered-by="13370:0">
                                                                    <div class="outputLookupContainer forceOutputLookupWithPreview"  >
                                                                        <a class="outputLookupLink slds-truncate forceOutputLookup"  data-refid="recordId" data-special-link="true" target="_blank" href="{!'/servlet/servlet.FileDownload?file='+att.Id}">
                                                                            {!att.Name}
                                                                        </a>
                                                                    </div>
                                                                    <p class="slds-m-around--none secondaryFields slds-text-body--small slds-truncate">
                                                                        <span class="seperator" data-aura-class="uiOutputDateTime"> 
                                                                            <lightning:formattedDateTime value="{!att.CreatedDate}"/>
                                                                        </span>
                                                                        <span class="itemLabel slds-truncate uiOutputText" data-aura-rendered-by="13392:0" data-aura-class="uiOutputText">Attachment</span>
                                                                        
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </h3>
                                                    </div>
                                                </li>
                                            </aura:iteration>
                                            <aura:iteration items="{!v.attachments.cdocList}" var="att"  indexVar="index" >
                                                <li class="slds-p-horizontal--small desktop forceImageRelatedListStencil forceRecordLayout" style="margin-bottom:5px;">
                                                    <div class="listItemBody withActions" >
                                                        <h3 class="primaryField" >
                                                            <div class="slds-size_12-of-12 slds-grid" data-aura-rendered-by="13350:0">
                                                                <div class="slds-align-middle">
                                                                    <span>
                                                                        <lightning:icon iconName="doctype:attachment" size="small" alternativeText="Attachments" />
                                                                    </span>
                                                                </div>
                                                                <div class="slds-show_inline-block slds-float_left slds-p-left--x-small slds-truncate slds-m-right_x-small" data-aura-rendered-by="13370:0">
                                                                    <div class="outputLookupContainer forceOutputLookupWithPreview"  >
                                                                        <a class="textUnderline outputLookupLink slds-truncate forceOutputLookup"  data-refid="recordId" data-special-link="true" target="_blank" data-recordid= "{!att.ContentDocumentId}" onclick="{!c.handleRedirect}" rel="noreferrer" title=""  >
                                                                            {!att.ContentDocument.Title}
                                                                        </a>
                                                                    </div>
                                                                    <p class="slds-m-around--none secondaryFields slds-text-body--small slds-truncate">
                                                                        <span class="seperator" data-aura-class="uiOutputDateTime"> 
                                                                            <lightning:formattedDateTime value="{!att.ContentDocument.CreatedDate}"/>
                                                                        </span>
                                                                        <span class="itemLabel slds-truncate uiOutputText" data-aura-rendered-by="13392:0" data-aura-class="uiOutputText">{!att.ContentDocument.FileExtension}</span>
                                                                        
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </h3>
                                                    </div>
                                                </li>
                                            </aura:iteration>
                                        </aura:if>
                                        
                                        <aura:if isTrue="{!v.showAsTable}">
                                            <table class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                <thead>
                                                    <tr class="slds-line-height_reset">
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="File">File</div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Size">Size</div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Inline">Inline</div>
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <aura:iteration items="{!v.attachments.attachList}" var="att"  indexVar="index" >
                                                        <tr class="slds-hint-parent">
                                                            <td data-label="Name">
                                                                <div class="slds-truncate" title="{!att.Name}">{!att.Name}</div>
                                                            </td>
                                                            <td data-label="Type">
                                                                <div class="slds-truncate" title="{!att.ContentType}">{!att.ContentType}</div>
                                                            </td>
                                                            <td>
                                                                <lightning:input type="checkbox"></lightning:input>
                                                            </td>
                                                        </tr>
                                                    </aura:iteration>
                                                </tbody>
                                            </table>
                                        </aura:if>
                                    </section>
                                </ul>
                                <div class="emptyContent hidden" >
                                    <div class="emptyContentInner slds-text-align--center"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <aura:if isTrue="{!v.showAsTable == false}">
                    <a href="javascript:void(0);"  onclick="{!c.gotoRelatedList}">
                        <div class="slds-card__footer">
                            <span class="view-all-label">
                                View All
                            </span>
                        </div>
                    </a>
                </aura:if>
            </article>
        </div>
    </div>
</aura:component>